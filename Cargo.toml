[workspace]
resolver = "2"

members = ["crates/stylex-*"]

[workspace.package]
license = "MIT"
repository = "https://github.com/Dwlad90/stylex-swc-plugin.git"


# Set the options for dependencies (not crates in the workspace), this mostly impacts cold builds
[profile.dev.package."*"]
opt-level = 1

# Set the settings for build scripts and proc-macros.
[profile.dev.build-override]
opt-level = 3

[profile.bench]
debug = true
lto = true

[profile.release]
# This removes more dead code
codegen-units = 1
lto = true
# Optimize for size
# opt-level = "s"
# Optimize for performance, this is default so you don't need to specify it
opt-level = "z"

# Strip debug symbols
strip = "symbols"

[workspace.dependencies]
serde = "1.0.215"
swc_core = { version = "9.0.0" }
lazy_static = "1.5.0"
serde_json = "1.0.133"
regex = "1.11.1"
indexmap = "2.7.0"
derive_more = { version = "1.0.0", features = ["display"] }
murmur2 = { version = "0.1.0" }
radix_fmt = { version = "1.0.0" }
phf = { version = "0.11.2" }
once_cell = { version = "1.20.2" }
colored = { version = "2.1.0" }
node-resolve = { version = "2.2.0" }
path-clean = { version = "1.0.1" }
cssparser = { version = "0.34.0" }
stylex_path_resolver = { path = "../path-resolver" }
testing = "5.0.0"
insta = { version = "1.41.1" }
anyhow = "1.0.94"
log = "0.4.22"
pretty_env_logger = "0.5.0"
color-backtrace = { version = "0.6.1" }
ctor = "0.2.9"
env_logger = "0.10.2"
chrono = "0.4.39"
rustc-hash="2.1.0"

# .cargo/config defines few alias to build plugin.
# cargo build-wasi generates wasm-wasi32 binary
# cargo build-wasm32 generates wasm32-unknown-unknown binary.

# wasm-pack build --target web --dev -d dist --out-name index
